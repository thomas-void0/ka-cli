#!/usr/bin/env node
!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";var e=require("download-git-repo"),r=require("ora"),n=require("fs"),o=require("path"),i=require("commander"),t=require("path"),c=require("fs"),a=require("glob"),s=require("inquirer");function u(n){var o;"."!==n&&c.mkdirSync(n),o=n,new Promise((function(n,i){var t="thomas-void0/react-mobile-template#master",c=r("正在下载项目模板，源地址".concat(t));c.start(),e(t,o,{clone:!1},(function(e){e?(c.fail("模板下载失败"),i(e)):(c.succeed("模板下载成功"),n(o))}))}))}!function(){i.usage("<project-name>").parse(process.argv);var e,r,f,m,d=i.rawArgs[2];d?(e=a.sync("*"),r=t.basename(process.cwd()),e.length?(m=d,e.some((function(e){var r=t.resolve(process.cwd(),e);r=c.statSync(r).isDirectory();return m===e&&r}))?function(e){s.prompt([{name:"isRemovePro",message:"项目".concat(e,"已经存在，是否覆盖文件"),type:"confirm",default:!0}]).then((function(r){r.isRemovePro?(function e(r){for(var i=n.readdirSync(r),t=0;t<i.length;t++){var c=o.join(r,i[t]);n.statSync(c).isDirectory()?e(c):n.unlinkSync(c)}n.rmdirSync(r)}(t.resolve(process.cwd(),e)),u(e)):console.log("停止创建")}))}(d):console.log("请选择一个空文件夹进行创建")):r===d?(f=d,s.prompt([{name:"buildInCurrent",message:"当前目录为空，且目录名称和项目名称相同，是否直接在当前目录下创建新项目？",type:"confirm",default:!0}]).then((function(e){e.buildInCurrent&&u(f)}))):u(d)):i.help()}()}));
