#!/usr/bin/env node
!function(e){"function"==typeof define&&define.amd?define(e):e()}(function(){"use strict";var t=require("download-git-repo"),c=require("ora");var a=require("fs"),s=require("path");var u=require("commander"),f=require("path"),m=require("fs"),d=require("glob"),l=require("inquirer");function p(r){l.prompt([{name:"isRemovePro",message:"项目".concat(r,"已经存在，是否覆盖文件"),type:"confirm",default:!0}]).then(function(e){e.isRemovePro?(function e(r){for(var n=a.readdirSync(r),o=0;o<n.length;o++){var i=s.join(r,n[o]);a.statSync(i).isDirectory()?e(i):a.unlinkSync(i)}a.rmdirSync(r)}(f.resolve(process.cwd(),r)),v(r)):console.log("停止创建")})}function v(e){var i;"."!==e&&m.mkdirSync(e),i=e,new Promise(function(r,n){var e="thomas-void0/react-mobile-template#master",o=c("正在下载项目模板，源地址".concat(e));o.start(),t(e,i,{clone:!1},function(e){e?(o.fail("模板下载失败"),n(e)):(o.succeed("模板下载成功"),r(i))})})}!function(){u.usage("<project-name>").parse(process.argv);var e,r,n,o,i=u.rawArgs[2];i?(e=d.sync("*"),r=f.basename(process.cwd()),e.length?(o=i,e.some(function(e){var r=f.resolve(process.cwd(),e),r=m.statSync(r).isDirectory();return o===e&&r})?p(i):console.log("请选择一个空文件夹进行创建")):r===i?(n=i,l.prompt([{name:"buildInCurrent",message:"当前目录为空，且目录名称和项目名称相同，是否直接在当前目录下创建新项目？",type:"confirm",default:!0}]).then(function(e){e.buildInCurrent&&v(n)})):v(i)):u.help()}()});
