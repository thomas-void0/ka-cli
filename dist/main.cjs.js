#!/usr/bin/env node
"use strict";var download=require("download-git-repo"),ora=require("ora");function download$1(a){return new Promise(function(e,n){var r="thomas-void0/react-mobile-template#master",o=ora("正在下载项目模板，源地址".concat(r));o.start(),download(r,a,{clone:!1},function(r){r?(o.fail("模板下载失败"),n(r)):(o.succeed("模板下载成功"),e(a))})})}var fs$1=require("fs"),path$1=require("path");function removeDir(r){for(var e=fs$1.readdirSync(r),n=0;n<e.length;n++){var o=path$1.join(r,e[n]);fs$1.statSync(o).isDirectory()?removeDir(o):fs$1.unlinkSync(o)}fs$1.rmdirSync(r)}var program=require("commander"),path=require("path"),fs=require("fs"),glob=require("glob"),inquirer=require("inquirer");function isSameName(r,n){return r.some(function(r){var e=path.resolve(process.cwd(),r),e=fs.statSync(e).isDirectory();return n===r&&e})}function runNotEmpty(e){inquirer.prompt([{name:"isRemovePro",message:"项目".concat(e,"已经存在，是否覆盖文件"),type:"confirm",default:!0}]).then(function(r){r.isRemovePro?(removeDir(path.resolve(process.cwd(),e)),create(e)):console.log("停止创建")})}function runParentSameName(e){inquirer.prompt([{name:"buildInCurrent",message:"当前目录为空，且目录名称和项目名称相同，是否直接在当前目录下创建新项目？",type:"confirm",default:!0}]).then(function(r){r.buildInCurrent&&create(e)})}function create(r){"."!==r&&fs.mkdirSync(r),download$1(r)}function run(){program.usage("<project-name>").parse(process.argv);var r,e,n=program.rawArgs[2];n?(r=glob.sync("*"),e=path.basename(process.cwd()),r.length?isSameName(r,n)?runNotEmpty(n):console.log("请选择一个空文件夹进行创建"):(e===n?runParentSameName:create)(n)):program.help()}run();
