#!/usr/bin/env node
"use strict";var e=require("ora");var r,n=(r=e)&&"object"==typeof r&&"default"in r?r:{default:r},o=require("download-git-repo");var t=require("fs"),i=require("path");function c(e){for(var r=t.readdirSync(e),n=0;n<r.length;n++){var o=i.join(e,r[n]);t.statSync(o).isDirectory()?c(o):t.unlinkSync(o)}t.rmdirSync(e)}var a=require("commander"),s=require("path"),u=require("fs"),f=require("glob"),l=require("inquirer");function m(e){var r;"."!==e&&u.mkdirSync(e),r=e,new Promise((function(e,t){var i="thomas-void0/react-mobile-template#master",c=n.default("正在下载项目模板，源地址".concat(i));c.start(),o(i,r,{clone:!1},(function(n){n?(c.fail("模板下载失败"),t(n)):(c.succeed("模板下载成功"),e(r))}))}))}function d(e){l.prompt([{name:"isRemovePro",message:"项目".concat(e,"已经存在，是否覆盖文件"),type:"confirm",default:!0}]).then((function(r){r.isRemovePro?(c(s.resolve(process.cwd(),e)),m(e)):console.log("停止创建")}))}function p(e){l.prompt([{name:"buildInCurrent",message:"当前目录为空，且目录名称和项目名称相同，是否直接在当前目录下创建新项目？",type:"confirm",default:!0}]).then((function(r){r.buildInCurrent&&m(e)}))}!function(){a.usage("<project-name>").parse(process.argv);var e,r,n=a.rawArgs[2];n?(e=f.sync("*"),r=s.basename(process.cwd()),e.length?function(e,r){return e.some((function(e){var n=s.resolve(process.cwd(),e);return n=u.statSync(n).isDirectory(),r===e&&n}))}(e,n)?d(n):console.log("请选择一个空文件夹进行创建"):(r===n?p:m)(n)):a.help()}();
