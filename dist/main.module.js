#!/usr/bin/env node
import e from"ora";var r=require("download-git-repo");var n=require("fs"),o=require("path");function t(e){for(var r=n.readdirSync(e),i=0;i<r.length;i++){var c=o.join(e,r[i]);n.statSync(c).isDirectory()?t(c):n.unlinkSync(c)}n.rmdirSync(e)}var i=require("commander"),c=require("path"),a=require("fs"),s=require("glob"),u=require("inquirer");function m(n){var o;"."!==n&&a.mkdirSync(n),o=n,new Promise((function(n,t){var i="thomas-void0/react-mobile-template#master",c=e("正在下载项目模板，源地址".concat(i));c.start(),r(i,o,{clone:!1},(function(e){e?(c.fail("模板下载失败"),t(e)):(c.succeed("模板下载成功"),n(o))}))}))}function f(e){u.prompt([{name:"isRemovePro",message:"项目".concat(e,"已经存在，是否覆盖文件"),type:"confirm",default:!0}]).then((function(r){r.isRemovePro?(t(c.resolve(process.cwd(),e)),m(e)):console.log("停止创建")}))}function l(e){u.prompt([{name:"buildInCurrent",message:"当前目录为空，且目录名称和项目名称相同，是否直接在当前目录下创建新项目？",type:"confirm",default:!0}]).then((function(r){r.buildInCurrent&&m(e)}))}!function(){i.usage("<project-name>").parse(process.argv);var e,r,n=i.rawArgs[2];n?(e=s.sync("*"),r=c.basename(process.cwd()),e.length?function(e,r){return e.some((function(e){var n=c.resolve(process.cwd(),e);return n=a.statSync(n).isDirectory(),r===e&&n}))}(e,n)?f(n):console.log("请选择一个空文件夹进行创建"):(r===n?l:m)(n)):i.help()}();
